@import "tailwindcss";

/* ===== Theme Configuration (Tailwind v4 CSS-first) ===== */
@theme {
  /* Breakpoints - ensure responsive classes work */
  --breakpoint-sm: 40rem;
  --breakpoint-md: 48rem;
  --breakpoint-lg: 64rem;
  --breakpoint-xl: 80rem;
  --breakpoint-2xl: 96rem;

  /* Border Radius - "Soft Brutalism" tight radii from DESIGN.md */
  --radius-sm: 2px;
  --radius-md: 4px;
  --radius-lg: 8px;

  /* Font Families - "The Digital Prism" typography from DESIGN.md */
  --font-sans: "Instrument Sans", system-ui, sans-serif;
  --font-display: "Bricolage Grotesque", system-ui, sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", monospace;

  /* Semantic Colors using OKLCH for P3 display support */
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-success: var(--success);
  --color-success-foreground: var(--success-foreground);

  --color-warning: var(--warning);
  --color-warning-foreground: var(--warning-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Brand colors */
  --color-orange: oklch(0.65 0.27 34);
  --color-lime: oklch(0.94 0.32 114);
  --color-forest: oklch(0.32 0.07 174);
  --color-emerald: oklch(0.66 0.17 162);

  /* Animations */
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;
  --animate-fade-in: fade-in 0.2s ease-out;
  --animate-fade-out: fade-out 0.2s ease-out;
  --animate-slide-in-from-top: slide-in-from-top 0.3s ease-out;
  --animate-slide-in-from-bottom: slide-in-from-bottom 0.3s ease-out;
  --animate-slide-in-from-left: slide-in-from-left 0.3s ease-out;
  --animate-slide-in-from-right: slide-in-from-right 0.3s ease-out;
  --animate-shimmer: shimmer 2s linear infinite;
  --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-reveal: reveal 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;

  /* Keyframes */
  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes fade-out {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }

  @keyframes slide-in-from-top {
    from {
      transform: translateY(-100%);
    }
    to {
      transform: translateY(0);
    }
  }

  @keyframes slide-in-from-bottom {
    from {
      transform: translateY(100%);
    }
    to {
      transform: translateY(0);
    }
  }

  @keyframes slide-in-from-left {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes slide-in-from-right {
    from {
      transform: translateX(100%);
    }
    to {
      transform: translateX(0);
    }
  }

  @keyframes shimmer {
    from {
      background-position: 200% 0;
    }
    to {
      background-position: -200% 0;
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  @keyframes reveal {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* ===== Light Mode - "Paper & Ink" from DESIGN.md ===== */
:root {
  /* Canvas & Surfaces */
  --background: oklch(0.99 0 0); /* Alabaster #FDFDFC */
  --foreground: oklch(0.11 0 0); /* Carbon #0A0A0A */

  --card: oklch(1 0 0); /* White #FFFFFF */
  --card-foreground: oklch(0.11 0 0); /* Carbon */

  --popover: oklch(1 0 0); /* White */
  --popover-foreground: oklch(0.11 0 0); /* Carbon */

  /* Primary - International Orange */
  --primary: oklch(0.65 0.27 34); /* #FF4F00 */
  --primary-foreground: oklch(1 0 0); /* White */

  /* Secondary - Deep Forest */
  --secondary: oklch(0.32 0.07 174); /* #004D40 */
  --secondary-foreground: oklch(1 0 0); /* White */

  /* Accent - Lime Acid */
  --accent: oklch(0.94 0.32 114); /* #CCFF00 */
  --accent-foreground: oklch(0.11 0 0); /* Carbon (black text on lime) */

  /* Muted */
  --muted: oklch(0.96 0 0);
  --muted-foreground: oklch(0.55 0 0);

  /* Destructive */
  --destructive: oklch(0.58 0.22 27);
  --destructive-foreground: oklch(1 0 0);

  /* Success - Emerald green */
  --success: oklch(0.66 0.17 162); /* #10B981 */
  --success-foreground: oklch(1 0 0);

  /* Warning - Amber/Yellow */
  --warning: oklch(0.75 0.18 75); /* #F59E0B */
  --warning-foreground: oklch(0.11 0 0);

  /* Borders & Inputs */
  --border: oklch(0.91 0 0); /* Smoke #E5E5E5 */
  --input: oklch(0.91 0 0);
  --ring: oklch(0.65 0.27 34); /* Primary orange */

  color-scheme: light;
}

/* ===== Dark Mode - "Obsidian & Neon" from DESIGN.md ===== */
.dark {
  /* Canvas & Surfaces */
  --background: oklch(0.07 0 0); /* Obsidian #050505 */
  --foreground: oklch(0.94 0 0); /* Mist #EDEDED */

  --card: oklch(0.16 0 0); /* Charcoal #121212 */
  --card-foreground: oklch(0.94 0 0); /* Mist */

  --popover: oklch(0.16 0 0); /* Charcoal */
  --popover-foreground: oklch(0.94 0 0); /* Mist */

  /* Primary - International Orange (same in dark) */
  --primary: oklch(0.65 0.27 34); /* #FF4F00 */
  --primary-foreground: oklch(1 0 0); /* White */

  /* Secondary - Emerald (brighter for dark mode) */
  --secondary: oklch(0.66 0.17 162); /* #10B981 */
  --secondary-foreground: oklch(0.11 0 0); /* Carbon */

  /* Accent - Lime Acid (same in dark) */
  --accent: oklch(0.94 0.32 114); /* #CCFF00 */
  --accent-foreground: oklch(0.11 0 0); /* Carbon */

  /* Muted */
  --muted: oklch(0.23 0 0);
  --muted-foreground: oklch(0.65 0 0);

  /* Destructive */
  --destructive: oklch(0.45 0.18 27);
  --destructive-foreground: oklch(0.94 0 0);

  /* Success - Emerald green (brighter for dark mode) */
  --success: oklch(0.66 0.17 162); /* #10B981 */
  --success-foreground: oklch(0.11 0 0);

  /* Warning - Amber/Yellow (brighter for dark mode) */
  --warning: oklch(0.8 0.16 75); /* Brighter amber */
  --warning-foreground: oklch(0.11 0 0);

  /* Borders & Inputs */
  --border: oklch(0.23 0 0); /* Graphite #262626 */
  --input: oklch(0.23 0 0);
  --ring: oklch(0.65 0.27 34); /* Primary orange */

  color-scheme: dark;
}

/* ===== Base Styles ===== */
* {
  border-color: var(--color-border);
}

body {
  background-color: var(--color-background);
  color: var(--color-foreground);
  font-family: var(--font-sans);
  font-feature-settings:
    "rlig" 1,
    "calt" 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Focus visible styling - "Soft Brutalism" thick border, no fuzzy ring */
*:focus-visible {
  outline: 2px solid var(--color-foreground);
  outline-offset: 2px;
}

/* ===== Display Typography Classes ===== */
/* Headlines use Bricolage Grotesque with tight tracking per DESIGN.md */
.heading-display {
  font-family: var(--font-display);
  letter-spacing: -0.02em;
  font-weight: 600;
}

/* Monospace for data values and technical identifiers */
.text-data {
  font-family: var(--font-mono);
  font-variant-numeric: tabular-nums;
}

/* ===== View Transitions for Theme Switching ===== */
@supports (view-transition-name: root) {
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 0.3s;
    animation-timing-function: ease-out;
  }

  ::view-transition-old(root) {
    animation-name: fade-out;
  }

  ::view-transition-new(root) {
    animation-name: fade-in;
  }
}

/* ===== Custom Utilities (Tailwind v4 @utility) ===== */
@utility text-balance {
  text-wrap: balance;
}

@utility gradient-text {
  background-image: linear-gradient(
    to right,
    var(--color-primary),
    var(--color-accent)
  );
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

@utility glass {
  background-color: color-mix(
    in oklch,
    var(--color-background) 80%,
    transparent
  );
  backdrop-filter: blur(16px);
  border: 1px solid color-mix(in oklch, var(--color-border) 50%, transparent);
}

@utility transition-smooth {
  transition-property: all;
  transition-duration: 200ms;
  transition-timing-function: ease-in-out;
}

@utility aspect-video-youtube {
  aspect-ratio: 16 / 9;
}

@utility scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* Typography utility for display font */
@utility font-display {
  font-family: var(--font-display);
}

/* ===== "Soft Brutalism" Design System Utilities from DESIGN.md ===== */

/* Noise texture overlay - adds subtle texture to reduce digital sterility */
@utility noise-texture {
  position: relative;
}

.noise-texture::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: 0.02;
  pointer-events: none;
  mix-blend-mode: overlay;
  z-index: 1;
}

.dark .noise-texture::before {
  opacity: 0.03;
}

/* Hard shadow for "Soft Brutalism" button hover - no blurred drop shadows */
@utility shadow-hard {
  box-shadow: 2px 2px 0px 0px var(--color-foreground);
}

@utility shadow-hard-sm {
  box-shadow: 1px 1px 0px 0px var(--color-foreground);
}

@utility shadow-hard-primary {
  box-shadow: 2px 2px 0px 0px var(--color-primary);
}

/* Offset border hover effect - alternative to shadows */
@utility border-offset-hover {
  position: relative;
}

.border-offset-hover::after {
  content: "";
  position: absolute;
  inset: -2px;
  border: 1px solid var(--color-foreground);
  border-radius: inherit;
  opacity: 0;
  transition:
    opacity 0.2s ease-out,
    transform 0.2s ease-out;
  transform: translate(2px, 2px);
  pointer-events: none;
}

.border-offset-hover:hover::after {
  opacity: 1;
}

/* ===== Staggered Reveal Animation System from DESIGN.md ===== */
/* Layout (sidebar/header): instant
   Hero/Title: 50ms delay
   Primary content: 100ms delay
   Secondary content: 150ms delay */

@utility stagger-0 {
  animation-delay: 0ms;
}

@utility stagger-1 {
  animation-delay: 50ms;
}

@utility stagger-2 {
  animation-delay: 100ms;
}

@utility stagger-3 {
  animation-delay: 150ms;
}

@utility stagger-4 {
  animation-delay: 200ms;
}

@utility stagger-5 {
  animation-delay: 250ms;
}

/* Reveal animation with stagger support */
@utility animate-stagger-reveal {
  opacity: 0;
  animation: reveal 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* ===== Prose Typography for Blog Content ===== */
/* Custom prose styles matching "The Digital Prism" design system */

.prose {
  color: var(--color-muted-foreground);
  max-width: 65ch;
  font-size: 1.125rem;
  line-height: 1.75;
}

.prose > * + * {
  margin-top: 1.25em;
}

/* Headings */
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: var(--color-foreground);
  font-family: var(--font-display);
  font-weight: 700;
  letter-spacing: -0.02em;
  line-height: 1.3;
}

.prose h1 {
  font-size: 2.25em;
  margin-top: 0;
  margin-bottom: 0.8em;
}

.prose h2 {
  font-size: 1.5em;
  margin-top: 2em;
  margin-bottom: 0.75em;
  padding-bottom: 0.5em;
  border-bottom: 1px solid var(--color-border);
}

.prose h3 {
  font-size: 1.25em;
  margin-top: 1.75em;
  margin-bottom: 0.5em;
}

.prose h4 {
  font-size: 1.125em;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
}

/* Paragraphs */
.prose p {
  margin-top: 1.25em;
  margin-bottom: 1.25em;
}

.prose p:first-child {
  margin-top: 0;
}

/* Links */
.prose a {
  color: var(--color-primary);
  text-decoration: none;
  font-weight: 500;
  transition: color 0.15s ease;
}

.prose a:hover {
  text-decoration: underline;
}

/* Strong and emphasis */
.prose strong {
  color: var(--color-foreground);
  font-weight: 600;
}

.prose em {
  font-style: italic;
}

/* Lists */
.prose ul,
.prose ol {
  margin-top: 1.25em;
  margin-bottom: 1.25em;
  padding-left: 1.5em;
}

.prose ul {
  list-style-type: disc;
}

.prose ol {
  list-style-type: decimal;
}

.prose li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.prose li::marker {
  color: var(--color-primary);
}

.prose ul ul,
.prose ul ol,
.prose ol ul,
.prose ol ol {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

/* Blockquotes */
.prose blockquote {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
  padding: 1em 1.5em;
  border-left: 4px solid var(--color-primary);
  background-color: var(--color-muted);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  font-style: italic;
}

.prose blockquote p {
  margin: 0;
}

/* Code */
.prose code {
  color: var(--color-foreground);
  background-color: var(--color-muted);
  padding: 0.2em 0.4em;
  border-radius: var(--radius-sm);
  font-family: var(--font-mono);
  font-size: 0.875em;
}

.prose pre {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
  padding: 1em 1.5em;
  background-color: var(--color-card);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  overflow-x: auto;
}

.prose pre code {
  background-color: transparent;
  padding: 0;
  font-size: 0.875em;
  line-height: 1.6;
}

/* Horizontal rules */
.prose hr {
  margin-top: 2em;
  margin-bottom: 2em;
  border: 0;
  border-top: 1px solid var(--color-border);
}

/* Images */
.prose img {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
  border-radius: var(--radius-lg);
  border: 1px solid var(--color-border);
}

/* Tables */
.prose table {
  width: 100%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
  border-collapse: collapse;
  font-size: 0.875em;
}

.prose th {
  padding: 0.75em 1em;
  text-align: left;
  font-weight: 600;
  color: var(--color-foreground);
  background-color: var(--color-muted);
  border-bottom: 2px solid var(--color-border);
}

.prose td {
  padding: 0.75em 1em;
  border-bottom: 1px solid var(--color-border);
}

/* Prose size modifiers */
.prose-lg {
  font-size: 1.25rem;
}

.prose-sm {
  font-size: 1rem;
}

/* Max width override */
.prose.max-w-none {
  max-width: none;
}
